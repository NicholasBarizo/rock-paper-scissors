<!DOCTYPE html>
<html>
    <head>
        <link href="styles/style.css" rel="stylesheet">
        <meta charset ="UTF-8">
    </head>
    <body>
        <div id="body">
            <div id="scoreboard">
                <div id="userScore">
                    <h3 id="userScoreText">0</h3>
                </div>
                <div id="computerScore">
                    <h3 id="computerScoreText">0</h3>
                </div>
            </div>
            <button id="rock">Rock</button>
            <button id="paper">Paper</button>
            <button id="scissors">Scissors</button>
            <div id="roundResults">
                <h2 id="roundResultsText"></h2>
            </div>
            <div id="playAgain">
                <button id="playAgainYes">Yes</button>
                <button id="playAgainNo">No</button>
            </div>
        </div>
        <script>
            // main();
            // function main(){
                let userScore = 0;
                let computerScore = 0;
                const rock = document.querySelector('#rock');
                const paper = document.querySelector('#paper');
                const scissors = document.querySelector('#scissors');
                const roundResults = document.getElementById('roundResults');
                const roundResultsText = document.getElementById('roundResultsText');
                const userScoreText = document.getElementById('userScoreText');
                const computerScoreText = document.getElementById('computerScoreText');
                const gameResult = document.getElementById('gameResult');
                // button clicks
                rock.addEventListener('click', () => {
                    roundResultsText.textContent = game(event.target.id.toString());
                });
                paper.addEventListener('click', () => {
                    roundResultsText.textContent = game(event.target.id.toString());
                });
                scissors.addEventListener('click', () => {
                    roundResultsText.textContent = game(event.target.id.toString());
                });
            //}
            function computerPlay(){
                let computerPlayNum = Math.floor(Math.random()* 3);
                if (computerPlayNum == 0) {
                    return "rock";
                }
                if (computerPlayNum == 1){
                    return "paper";
                } 
                if (computerPlayNum == 2) {
                    return "scissors";
                }
            }
            function determineResults(userHand, computerHand, roundResult){
                if(roundResult == 'win'){
                    roundResults.style.backgroundColor = 'hsl(115 60% 50%)';
                    userScore += 1;
                    userScoreText.textContent = userScore;
                    if(userScore >= 5){
                        return 'You\'ve won the match! Play again?'
                    }
                    return `You win! ${userHand} beats ${computerHand}!`;
                }
                if(roundResult == 'loss'){
                    roundResults.style.backgroundColor = 'hsl(0 60% 50%)';
                    computerScore += 1;
                    computerScoreText.textContent = computerScore;
                    if(computerScore >= 5){
                        return 'You\'ve lost the match! Play again?'
                    }
                    return `You lose! ${computerHand} beats ${userHand}!`;
                }
                if(roundResult == 'tie'){
                    roundResults.style.backgroundColor = 'hsl(60 0% 80%)';
                    return `${userHand} ties with ${computerHand}!`;
                }
            }
            function game(userHand){
                let computerHand = computerPlay();
    
                // Return Winner and Loser
                if (userHand == "rock"){
                    if (computerHand == "scissors"){
                        return determineResults(userHand, computerHand, 'win');
                    }
                    else if (computerHand == "paper"){
                        return determineResults(userHand, computerHand, 'loss');
                    }
                    else{
                        return determineResults(userHand, computerHand, 'tie');
                    }
                }
                if (userHand == "paper"){
                    if (computerHand == "rock"){
                        return determineResults(userHand, computerHand, 'win');
                    }
                    else if (computerHand == "scissors"){
                        return determineResults(userHand, computerHand, 'loss');
                    }
                    else{
                        return determineResults(userHand, computerHand, 'tie');
                    }
                }
                if (userHand == "scissors"){
                    if (computerHand == "paper"){
                        return determineResults(userHand, computerHand, 'win');
                    }
                    else if (computerHand == "rock"){
                        return determineResults(userHand, computerHand, 'loss');
                    }
                    else{
                        return determineResults(userHand, computerHand, 'tie');
                    }
                }
            }
        </script>
    </body>
</html>